"use strict";(self.webpackChunkdynastypay_frontend=self.webpackChunkdynastypay_frontend||[]).push([[348],{4348:(st,p,a)=>{a.r(p),a.d(p,{ClientsModule:()=>nt});var C=a(6814),d=a(7700),t=a(5879),m=a(6223),u=a(4472),Z=a(2032),f=a(9157),_=a(8525),y=a(3680);function A(e,n){if(1&e&&(t.TgZ(0,"mat-option",11),t._uU(1),t.qZA()),2&e){const o=n.$implicit;t.Q6J("value",o.Id),t.xp6(1),t.Oqu(o.Name)}}let h=(()=>{class e{constructor(o,i,s,l,r){this._dialogRef=o,this._fb=i,this._providerService=s,this._clientService=l,this.data=r,this.clientsForm=this._fb.group({Name:"",ProviderId:""})}ngOnInit(){this.getProviderList(),this.clientsForm.patchValue(this.data)}onFormSubmit(){if(this.data){const o={...this.clientsForm.value,Id:this.data.Id};this.obsClientUpdate=this._clientService.apiClientUpdateClientPost(o),this.subsClientUpdate=this.obsClientUpdate.subscribe({next:i=>{console.log(i),this._dialogRef.close(!0),alert("Data Updated Successfully")},error:i=>{console.log(i)},complete:()=>{this.subsClientUpdate.unsubscribe()}})}else this.obsClient=this._clientService.apiClientCreateClientPost(this.clientsForm.value),this.subsClient=this.obsClient.subscribe({next:o=>{this._dialogRef.close(!0),alert("Data Added Successfully")},error:o=>{console.log(o)},complete:()=>{this.subsClient.unsubscribe()}})}getProviderList(){this.obsProvider=this._providerService.apiProvidersGetAllProvidersGet(),this.subsProvider=this.obsProvider.subscribe({next:o=>{this.providerList=o,console.log(this.providerList)},error:o=>{console.log(o)},complete:()=>{}})}static#t=this.\u0275fac=function(i){return new(i||e)(t.Y36(d.so),t.Y36(m.qu),t.Y36(u.j7),t.Y36(u.yt),t.Y36(d.WI))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-clients-form"]],decls:20,vars:3,consts:[["mat-dialog-title",""],[3,"formGroup","ngSubmit"],["mat-dialog-content",""],[1,"row"],["appearance","outline"],["matInput","","placeholder","Ex. Casineam...","formControlName","Name"],["formControlName","ProviderId"],[3,"value",4,"ngFor","ngForOf"],["mat-dialog-actions",""],["type","button",1,"btn","btn-default"],["type","submit",1,"btn","btn-primary"],[3,"value"]],template:function(i,s){1&i&&(t.TgZ(0,"div",0)(1,"h1"),t._uU(2,"Clients Form"),t.qZA()(),t.TgZ(3,"form",1),t.NdJ("ngSubmit",function(){return s.onFormSubmit()}),t.TgZ(4,"div",2)(5,"div",3)(6,"mat-form-field",4)(7,"mat-label"),t._uU(8,"Client name"),t.qZA(),t._UZ(9,"input",5),t.qZA(),t.TgZ(10,"mat-form-field")(11,"mat-label"),t._uU(12,"Provider"),t.qZA(),t.TgZ(13,"mat-select",6),t.YNc(14,A,2,2,"mat-option",7),t.qZA()()()(),t.TgZ(15,"div",8)(16,"button",9),t._uU(17,"Cancel"),t.qZA(),t.TgZ(18,"button",10),t._uU(19),t.qZA()()()),2&i&&(t.xp6(3),t.Q6J("formGroup",s.clientsForm),t.xp6(11),t.Q6J("ngForOf",s.providerList),t.xp6(5),t.Oqu(s.data?"Update":"Save"))},dependencies:[C.sg,Z.Nt,f.KE,f.hX,d.uh,d.xY,d.H8,_.gD,y.ey,m._Y,m.Fj,m.JJ,m.JL,m.sg,m.u]})}return e})();var b=a(9315),g=a(2096),N=a(7398),U=a(6306),c=a(5313),v=a(3365),x=a(3566),S=a(617),Y=a(2296),I=a(9843);function F(e,n){1&e&&(t.TgZ(0,"th",26),t._uU(1," ID "),t.qZA())}function D(e,n){if(1&e&&(t.TgZ(0,"td",27),t._uU(1),t.qZA()),2&e){const o=n.$implicit;t.xp6(1),t.hij(" ",o.Id," ")}}function P(e,n){1&e&&(t.TgZ(0,"th",26),t._uU(1," Client "),t.qZA())}function B(e,n){if(1&e&&(t.TgZ(0,"td",27),t._uU(1),t.qZA()),2&e){const o=n.$implicit;t.xp6(1),t.hij(" ",o.Name," ")}}function Q(e,n){1&e&&(t.TgZ(0,"th",26),t._uU(1," Transaction Count "),t.qZA())}function J(e,n){if(1&e&&(t.TgZ(0,"td",27),t._uU(1),t.qZA()),2&e){const o=n.$implicit;t.xp6(1),t.hij(" ",o.TransactionCount," ")}}function R(e,n){1&e&&(t.TgZ(0,"th",26),t._uU(1," Total Cash In"),t.qZA())}function O(e,n){if(1&e&&(t.TgZ(0,"td",27),t._uU(1),t.qZA()),2&e){const o=n.$implicit;t.xp6(1),t.hij(" ",o.TotalCashIn," ")}}function j(e,n){1&e&&(t.TgZ(0,"th",26),t._uU(1,"Total Cash Out "),t.qZA())}function q(e,n){if(1&e&&(t.TgZ(0,"td",27),t._uU(1),t.qZA()),2&e){const o=n.$implicit;t.xp6(1),t.hij(" ",o.TotalCashOut," ")}}function w(e,n){1&e&&(t.TgZ(0,"th",26),t._uU(1,"Balance "),t.qZA())}function G(e,n){if(1&e&&(t.TgZ(0,"td",27),t._uU(1),t.qZA()),2&e){const o=n.$implicit;t.xp6(1),t.hij(" ",o.Balance," ")}}function $(e,n){1&e&&(t.TgZ(0,"th",26),t._uU(1,"Status "),t.qZA())}function E(e,n){if(1&e&&(t.TgZ(0,"td",27),t._uU(1),t.qZA()),2&e){const o=n.$implicit;t.xp6(1),t.hij(" ",o.Status," ")}}function H(e,n){1&e&&(t.TgZ(0,"th",26),t._uU(1,"Provider "),t.qZA())}function K(e,n){if(1&e&&(t.TgZ(0,"td",27),t._uU(1),t.qZA()),2&e){const o=n.$implicit;t.xp6(1),t.hij(" ",o.ProviderId," ")}}function L(e,n){1&e&&(t.TgZ(0,"th",26),t._uU(1,"Actions "),t.qZA())}function M(e,n){if(1&e){const o=t.EpF();t.TgZ(0,"td",27)(1,"button",28),t.NdJ("click",function(){const l=t.CHM(o).$implicit,r=t.oxw();return t.KtG(r.openEditForm(l))}),t.TgZ(2,"mat-icon"),t._uU(3,"edit"),t.qZA()(),t.TgZ(4,"button",29)(5,"mat-icon"),t._uU(6,"delete"),t.qZA()()()}}function z(e,n){1&e&&t._UZ(0,"tr",30)}function X(e,n){1&e&&t._UZ(0,"tr",31)}function V(e,n){1&e&&(t.TgZ(0,"tr",32)(1,"td",33),t._uU(2,'No data matching the filter"'),t.qZA()())}const W=function(){return[5,10,25,100]};let k=(()=>{class e{constructor(o,i,s){this._dialog=o,this._clientService=i,this._providerService=s,this.displayedColumns=["Id","Name","TransactionCount","TotalCashIn","TotalCashOut","Balance","Status","ProviderId","Actions"]}ngOnInit(){this.getAllClients()}openForm(){this._dialog.open(h).afterClosed().subscribe({next:i=>{i&&this.getAllClients()}})}openEditForm(o){this._dialog.open(h,{data:o}).afterClosed().subscribe({next:s=>{s&&this.getAllClients()}})}applyFilter(o){this.dataSource.filter=o.target.value.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}getAllClients(){this.obsClient=this._clientService.apiClientGetAllClientsGet(),this.subsClient=this.obsClient.subscribe({next:o=>{const i=o.map(s=>this.getProviderNameById(s.ProviderId));(0,b.D)(i).subscribe(s=>{const l=o.map((r,at)=>({Id:r.Id,Name:r.Name,TransactionCount:r.TransactionCount,TotalCashIn:r.TotalCashIn,TotalCashOut:r.TotalCashOut,Balance:r.Balance,Status:r.Status,ProviderId:s[at]}));this.dataSource=new c.by(l),this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator})},error:o=>{console.log(o)},complete:()=>{}})}getProviderNameById(o){return void 0===o?(0,g.of)("providerId not Found"):this._providerService.apiProvidersGetProviderByIdGet(o).pipe((0,N.U)(i=>i?.Name??"providerId not Found"),(0,U.K)(i=>(console.log(i),(0,g.of)("providerId not Found"))))}static#t=this.\u0275fac=function(i){return new(i||e)(t.Y36(d.uw),t.Y36(u.yt),t.Y36(u.j7))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-clients"]],viewQuery:function(i,s){if(1&i&&(t.Gf(v.NW,5),t.Gf(x.YE,5)),2&i){let l;t.iGM(l=t.CRH())&&(s.paginator=l.first),t.iGM(l=t.CRH())&&(s.sort=l.first)}},decls:45,vars:5,consts:[[1,"card-wrapper"],[1,"card-header"],[1,"card-title"],[1,"card-actions"],[1,"h-divider"],[3,"searchKeyup"],[1,"btn","btn-primary",3,"click"],[1,"card-body"],[1,"mat-elevation-z8"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","Id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","Name"],["matColumnDef","TransactionCount"],["matColumnDef","TotalCashIn"],["matColumnDef","TotalCashOut"],["matColumnDef","Balance"],["matColumnDef","Status"],["matColumnDef","ProviderId"],["matColumnDef","Actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["aria-label","Select page of users",3,"pageSizeOptions"],[1,"card-footer"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-icon-button","","color","primary",3,"click"],["mat-icon-button","","color","warn"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(i,s){1&i&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._uU(3,"Client List "),t.qZA(),t.TgZ(4,"div",3),t._UZ(5,"div",4),t.TgZ(6,"app-search",5),t.NdJ("searchKeyup",function(r){return s.applyFilter(r)}),t.qZA(),t._UZ(7,"div",4),t.TgZ(8,"button",6),t.NdJ("click",function(){return s.openForm()}),t._uU(9,"Add Client"),t.qZA()()(),t.TgZ(10,"div",7)(11,"div",8)(12,"table",9),t.ynx(13,10),t.YNc(14,F,2,0,"th",11),t.YNc(15,D,2,1,"td",12),t.BQk(),t.ynx(16,13),t.YNc(17,P,2,0,"th",11),t.YNc(18,B,2,1,"td",12),t.BQk(),t.ynx(19,14),t.YNc(20,Q,2,0,"th",11),t.YNc(21,J,2,1,"td",12),t.BQk(),t.ynx(22,15),t.YNc(23,R,2,0,"th",11),t.YNc(24,O,2,1,"td",12),t.BQk(),t.ynx(25,16),t.YNc(26,j,2,0,"th",11),t.YNc(27,q,2,1,"td",12),t.BQk(),t.ynx(28,17),t.YNc(29,w,2,0,"th",11),t.YNc(30,G,2,1,"td",12),t.BQk(),t.ynx(31,18),t.YNc(32,$,2,0,"th",11),t.YNc(33,E,2,1,"td",12),t.BQk(),t.ynx(34,19),t.YNc(35,H,2,0,"th",11),t.YNc(36,K,2,1,"td",12),t.BQk(),t.ynx(37,20),t.YNc(38,L,2,0,"th",11),t.YNc(39,M,7,0,"td",12),t.BQk(),t.YNc(40,z,1,0,"tr",21),t.YNc(41,X,1,0,"tr",22),t.YNc(42,V,3,0,"tr",23),t.qZA(),t._UZ(43,"mat-paginator",24),t.qZA()(),t._UZ(44,"div",25),t.qZA()),2&i&&(t.xp6(12),t.Q6J("dataSource",s.dataSource),t.xp6(28),t.Q6J("matHeaderRowDef",s.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",s.displayedColumns),t.xp6(2),t.Q6J("pageSizeOptions",t.DdM(4,W)))},dependencies:[S.Hw,c.BZ,c.fO,c.as,c.w1,c.Dz,c.nj,c.ge,c.ev,c.XQ,c.Gk,c.Ee,v.NW,Y.RK,I.g]})}return e})();var T=a(4828);const tt=[{path:"",component:k}];let et=(()=>{class e{static#t=this.\u0275fac=function(i){return new(i||e)};static#e=this.\u0275mod=t.oAB({type:e});static#o=this.\u0275inj=t.cJS({imports:[T.Bz.forChild(tt),T.Bz]})}return e})();var ot=a(2318),it=a(2522);let nt=(()=>{class e{static#t=this.\u0275fac=function(i){return new(i||e)};static#e=this.\u0275mod=t.oAB({type:e});static#o=this.\u0275inj=t.cJS({imports:[C.ez,et,it.M,m.UX,ot.K]})}return e})()}}]);