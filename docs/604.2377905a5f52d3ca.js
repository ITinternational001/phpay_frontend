"use strict";(self.webpackChunkdynastypay_frontend=self.webpackChunkdynastypay_frontend||[]).push([[604],{3604:(dt,p,r)=>{r.r(p),r.d(p,{VendorsModule:()=>ct});var f=r(6814),m=r(7700),t=r(5879),d=r(6223),u=r(4472),y=r(2032),h=r(9157),_=r(8525),T=r(3680);function v(e,o){if(1&e&&(t.TgZ(0,"mat-option",18),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.Q6J("value",n.Id),t.xp6(1),t.Oqu(n.Name)}}let C=(()=>{class e{constructor(n,a,i,c,l){this._fb=n,this._paymentChannelService=a,this._dialogRef=i,this.data=c,this._vendorService=l,this.vendorForm=this._fb.group({Name:"",PaymentChannelId:"",SecretKey:"ThisIsSecret",Status:1,CallbackUrl:"Callback",RedirectUrl:"REdirect",SuccessRedirectUrl:"Success",FailureRedirectUrl:"Failure",CancelRedirectUrl:"Cancel"})}ngOnInit(){this.getAllpaymentChannel(),this.vendorForm.patchValue(this.data)}onFormSubmit(){if(this.data){const n={...this.vendorForm.value,Id:this.data.Id};this.obsVendorUpdate=this._vendorService.apiVendorsUpdateVendorPost(n),this.subsVendorUpdate=this.obsVendorUpdate.subscribe({next:a=>{console.log(a),this._dialogRef.close(!0),alert("Data Updated Successfully")},error:a=>{console.log(a)},complete:()=>{this.subsVendorUpdate.unsubscribe()}})}else this.obsVendor=this._vendorService.apiVendorsCreateVendorPost(this.vendorForm.value),this.subsVendor=this.obsVendor.subscribe({next:n=>{this._dialogRef.close(!0),alert("Data Added Successfully")},error:n=>{console.log(n)},complete:()=>{this.subsVendor.unsubscribe()}})}getAllpaymentChannel(){this.obsPaymentChannel=this._paymentChannelService.apiPaymentChannelsGetAllPaymentChannelsGet(),this.subsPaymentChannel=this.obsPaymentChannel.subscribe({next:n=>{this.paymentChannelList=n,console.log(n)},error:n=>{console.log(n)},complete:()=>{}})}static#t=this.\u0275fac=function(a){return new(a||e)(t.Y36(d.qu),t.Y36(u.qp),t.Y36(m.so),t.Y36(m.WI),t.Y36(u.mq))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-vendor-form"]],decls:50,vars:3,consts:[["mat-dialog-title",""],[3,"formGroup","ngSubmit"],["mat-dialog-content",""],[1,"row"],["appearance","outline"],["matInput","","placeholder","Ex. Mangopay, Ppay etc.","formControlName","Name"],["formControlName","PaymentChannelId"],[3,"value",4,"ngFor","ngForOf"],["matInput","","placeholder","Ex. Mangopay, Ppay etc.","formControlName","SecretKey"],["matInput","","placeholder","Ex. Mangopay, Ppay etc.","formControlName","Status"],["matInput","","placeholder","Ex. Mangopay, Ppay etc.","formControlName","CallbackUrl"],["matInput","","placeholder","Ex. Mangopay, Ppay etc.","formControlName","RedirectUrl"],["matInput","","placeholder","Ex. Mangopay, Ppay etc.","formControlName","SuccessRedirectUrl"],["matInput","","placeholder","Ex. Mangopay, Ppay etc.","formControlName","FailureRedirectUrl"],["matInput","","placeholder","Ex. Mangopay, Ppay etc.","formControlName","CancelRedirectUrl"],["mat-dialog-actions",""],["type","button",1,"btn","btn-default"],["type","submit",1,"btn","btn-primary"],[3,"value"]],template:function(a,i){1&a&&(t.TgZ(0,"div",0)(1,"h1"),t._uU(2,"Vendor Form"),t.qZA()(),t.TgZ(3,"form",1),t.NdJ("ngSubmit",function(){return i.onFormSubmit()}),t.TgZ(4,"div",2)(5,"div",3)(6,"mat-form-field",4)(7,"mat-label"),t._uU(8,"Vendor name"),t.qZA(),t._UZ(9,"input",5),t.qZA(),t.TgZ(10,"mat-form-field")(11,"mat-label"),t._uU(12,"Payment Channel"),t.qZA(),t.TgZ(13,"mat-select",6),t.YNc(14,v,2,2,"mat-option",7),t.qZA()(),t.TgZ(15,"mat-form-field",4)(16,"mat-label"),t._uU(17,"Secret Key"),t.qZA(),t._UZ(18,"input",8),t.qZA(),t.TgZ(19,"mat-form-field",4)(20,"mat-label"),t._uU(21,"Status"),t.qZA(),t._UZ(22,"input",9),t.qZA(),t.TgZ(23,"h2"),t._uU(24,"URL"),t.qZA(),t.TgZ(25,"mat-form-field",4)(26,"mat-label"),t._uU(27,"Callback"),t.qZA(),t._UZ(28,"input",10),t.qZA(),t.TgZ(29,"mat-form-field",4)(30,"mat-label"),t._uU(31,"Redirect"),t.qZA(),t._UZ(32,"input",11),t.qZA(),t.TgZ(33,"mat-form-field",4)(34,"mat-label"),t._uU(35,"Success Redirect"),t.qZA(),t._UZ(36,"input",12),t.qZA(),t.TgZ(37,"mat-form-field",4)(38,"mat-label"),t._uU(39,"Failure Redirect"),t.qZA(),t._UZ(40,"input",13),t.qZA(),t.TgZ(41,"mat-form-field",4)(42,"mat-label"),t._uU(43,"Cancel Redirect"),t.qZA(),t._UZ(44,"input",14),t.qZA()()(),t.TgZ(45,"div",15)(46,"button",16),t._uU(47,"Cancel"),t.qZA(),t.TgZ(48,"button",17),t._uU(49),t.qZA()()()),2&a&&(t.xp6(3),t.Q6J("formGroup",i.vendorForm),t.xp6(11),t.Q6J("ngForOf",i.paymentChannelList),t.xp6(35),t.Oqu(i.data?"Update":"Save"))},dependencies:[f.sg,d._Y,d.Fj,d.JJ,d.JL,d.sg,d.u,y.Nt,h.KE,h.hX,m.uh,m.xY,m.H8,_.gD,T.ey]})}return e})();var A=r(9315),Z=r(2096),V=r(7398),b=r(6306),g=r(3365),S=r(3566),s=r(5313),N=r(617),R=r(2296),x=r(9843);function F(e,o){1&e&&(t.TgZ(0,"th",28),t._uU(1," ID "),t.qZA())}function q(e,o){if(1&e&&(t.TgZ(0,"td",29),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij(" ",n.Id," ")}}function Y(e,o){1&e&&(t.TgZ(0,"th",28),t._uU(1," Vendor "),t.qZA())}function P(e,o){if(1&e&&(t.TgZ(0,"td",29),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij(" ",n.Name," ")}}function I(e,o){1&e&&(t.TgZ(0,"th",28),t._uU(1," PaymentChannel "),t.qZA())}function D(e,o){if(1&e&&(t.TgZ(0,"td",29),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij(" ",n.PaymentChannel," ")}}function Q(e,o){1&e&&(t.TgZ(0,"th",28),t._uU(1," Secret Key "),t.qZA())}function B(e,o){if(1&e&&(t.TgZ(0,"td",29),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij(" ",n.SecretKey," ")}}function J(e,o){1&e&&(t.TgZ(0,"th",28),t._uU(1,"Status "),t.qZA())}function K(e,o){if(1&e&&(t.TgZ(0,"td",29),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij(" ",n.Status," ")}}function w(e,o){1&e&&(t.TgZ(0,"th",28),t._uU(1,"SuccessRedirectUrl "),t.qZA())}function E(e,o){if(1&e&&(t.TgZ(0,"td",29),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij(" ",n.SuccessRedirectUrl," ")}}function M(e,o){1&e&&(t.TgZ(0,"th",28),t._uU(1,"RedirectUrl "),t.qZA())}function j(e,o){if(1&e&&(t.TgZ(0,"td",29),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij(" ",n.RedirectUrl," ")}}function G(e,o){1&e&&(t.TgZ(0,"th",28),t._uU(1,"CallbackUrl "),t.qZA())}function $(e,o){if(1&e&&(t.TgZ(0,"td",29),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij(" ",n.CallbackUrl," ")}}function k(e,o){1&e&&(t.TgZ(0,"th",28),t._uU(1,"CancelRedirectUrl "),t.qZA())}function O(e,o){if(1&e&&(t.TgZ(0,"td",29),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij(" ",n.CancelRedirectUrl," ")}}function H(e,o){1&e&&(t.TgZ(0,"th",28),t._uU(1,"FailureRedirectUrl "),t.qZA())}function z(e,o){if(1&e&&(t.TgZ(0,"td",29),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij(" ",n.FailureRedirectUrl," ")}}function L(e,o){1&e&&(t.TgZ(0,"th",28),t._uU(1,"Actions "),t.qZA())}function X(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"td",29)(1,"button",30),t.NdJ("click",function(){const c=t.CHM(n).$implicit,l=t.oxw();return t.KtG(l.openEditForm(c))}),t.TgZ(2,"mat-icon"),t._uU(3,"edit"),t.qZA()(),t.TgZ(4,"button",31)(5,"mat-icon"),t._uU(6,"delete"),t.qZA()()()}}function W(e,o){1&e&&t._UZ(0,"tr",32)}function tt(e,o){1&e&&t._UZ(0,"tr",33)}function et(e,o){1&e&&(t.TgZ(0,"tr",34)(1,"td",35),t._uU(2,'No data matching the filter"'),t.qZA()())}const nt=function(){return[5,10,25,100]};let ot=(()=>{class e{constructor(n,a,i){this._dialog=n,this._vendorService=a,this._paymentChannelService=i,this.displayedColumns=["Id","Name","PaymentChannel","SecretKey","Status","SuccessRedirectUrl","RedirectUrl","CallbackUrl","CancelRedirectUrl","FailureRedirectUrl","Actions"]}ngOnInit(){this.getAllVendor(),console.log()}openForm(){this._dialog.open(C).afterClosed().subscribe({next:a=>{a&&this.getAllVendor()}})}openEditForm(n){this._dialog.open(C,{data:n}).afterClosed().subscribe({next:i=>{i&&this.getAllVendor()}})}applyFilter(n){this.dataSource.filter=n.target.value.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}getAllVendor(){this.obsVendor=this._vendorService.apiVendorsGetAllVendorsGet(),this.subsVendor=this.obsVendor.subscribe({next:n=>{const a=n.map(i=>this.getPaymentChannelNameById(i.PaymentChannelId));(0,A.D)(a).subscribe(i=>{const c=n.map((l,st)=>({Id:l.Id,Name:l.Name,PaymentChannel:i[st],SecretKey:l.SecretKey,Status:l.Status,SuccessRedirectUrl:l.SuccessRedirectUrl,RedirectUrl:l.RedirectUrl,CallbackUrl:l.CallbackUrl,CancelRedirectUrl:l.CancelRedirectUrl,FailureRedirectUrl:l.FailureRedirectUrl}));this.dataSource=new s.by(c),this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator})},error:n=>{console.log(n)},complete:()=>{}})}getPaymentChannelNameById(n){return void 0===n?(0,Z.of)("providerId not Found"):this._paymentChannelService.apiPaymentChannelsGetPaymentChannelByIdGet(n).pipe((0,V.U)(a=>a?.Name??"paymentChannelId not Found"),(0,b.K)(a=>(console.log(a),(0,Z.of)("paymentChannelId not Found"))))}static#t=this.\u0275fac=function(a){return new(a||e)(t.Y36(m.uw),t.Y36(u.mq),t.Y36(u.qp))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-vendors"]],viewQuery:function(a,i){if(1&a&&(t.Gf(g.NW,5),t.Gf(S.YE,5)),2&a){let c;t.iGM(c=t.CRH())&&(i.paginator=c.first),t.iGM(c=t.CRH())&&(i.sort=c.first)}},decls:51,vars:5,consts:[[1,"card-wrapper"],[1,"card-header"],[1,"card-title"],[1,"card-actions"],[1,"h-divider"],[3,"searchKeyup"],[1,"btn","btn-primary",3,"click"],[1,"card-body"],[1,"mat-elevation-z8"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","Id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","Name"],["matColumnDef","PaymentChannel"],["matColumnDef","SecretKey"],["matColumnDef","Status"],["matColumnDef","SuccessRedirectUrl"],["matColumnDef","RedirectUrl"],["matColumnDef","CallbackUrl"],["matColumnDef","CancelRedirectUrl"],["matColumnDef","FailureRedirectUrl"],["matColumnDef","Actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["aria-label","Select page of users",3,"pageSizeOptions"],[1,"card-footer"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-icon-button","","color","primary",3,"click"],["mat-icon-button","","color","warn"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(a,i){1&a&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._uU(3,"Vendors "),t.qZA(),t.TgZ(4,"div",3),t._UZ(5,"div",4),t.TgZ(6,"app-search",5),t.NdJ("searchKeyup",function(l){return i.applyFilter(l)}),t.qZA(),t._UZ(7,"div",4),t.TgZ(8,"button",6),t.NdJ("click",function(){return i.openForm()}),t._uU(9,"Add Vendor"),t.qZA()()(),t.TgZ(10,"div",7)(11,"div",8)(12,"table",9),t.ynx(13,10),t.YNc(14,F,2,0,"th",11),t.YNc(15,q,2,1,"td",12),t.BQk(),t.ynx(16,13),t.YNc(17,Y,2,0,"th",11),t.YNc(18,P,2,1,"td",12),t.BQk(),t.ynx(19,14),t.YNc(20,I,2,0,"th",11),t.YNc(21,D,2,1,"td",12),t.BQk(),t.ynx(22,15),t.YNc(23,Q,2,0,"th",11),t.YNc(24,B,2,1,"td",12),t.BQk(),t.ynx(25,16),t.YNc(26,J,2,0,"th",11),t.YNc(27,K,2,1,"td",12),t.BQk(),t.ynx(28,17),t.YNc(29,w,2,0,"th",11),t.YNc(30,E,2,1,"td",12),t.BQk(),t.ynx(31,18),t.YNc(32,M,2,0,"th",11),t.YNc(33,j,2,1,"td",12),t.BQk(),t.ynx(34,19),t.YNc(35,G,2,0,"th",11),t.YNc(36,$,2,1,"td",12),t.BQk(),t.ynx(37,20),t.YNc(38,k,2,0,"th",11),t.YNc(39,O,2,1,"td",12),t.BQk(),t.ynx(40,21),t.YNc(41,H,2,0,"th",11),t.YNc(42,z,2,1,"td",12),t.BQk(),t.ynx(43,22),t.YNc(44,L,2,0,"th",11),t.YNc(45,X,7,0,"td",12),t.BQk(),t.YNc(46,W,1,0,"tr",23),t.YNc(47,tt,1,0,"tr",24),t.YNc(48,et,3,0,"tr",25),t.qZA(),t._UZ(49,"mat-paginator",26),t.qZA()(),t._UZ(50,"div",27),t.qZA()),2&a&&(t.xp6(12),t.Q6J("dataSource",i.dataSource),t.xp6(34),t.Q6J("matHeaderRowDef",i.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns),t.xp6(2),t.Q6J("pageSizeOptions",t.DdM(4,nt)))},dependencies:[N.Hw,s.BZ,s.fO,s.as,s.w1,s.Dz,s.nj,s.ge,s.ev,s.XQ,s.Gk,s.Ee,g.NW,R.RK,x.g]})}return e})();var U=r(4828);const at=[{path:"",component:ot}];let rt=(()=>{class e{static#t=this.\u0275fac=function(a){return new(a||e)};static#e=this.\u0275mod=t.oAB({type:e});static#n=this.\u0275inj=t.cJS({imports:[U.Bz.forChild(at),U.Bz]})}return e})();var it=r(2522),lt=r(2318);let ct=(()=>{class e{static#t=this.\u0275fac=function(a){return new(a||e)};static#e=this.\u0275mod=t.oAB({type:e});static#n=this.\u0275inj=t.cJS({imports:[f.ez,rt,d.UX,it.M,lt.K]})}return e})()}}]);