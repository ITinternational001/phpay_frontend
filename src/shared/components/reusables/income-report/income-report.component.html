<div class="row">
	<div class="col-md-4">
		<form [formGroup]="IncomeReportForm">
			<div class="row form-container">
				<div class="col-md-12 col-sm-12 col-xs-12">
					<div class="row">
						<div class="col-md-6">
							<!-- <div class="item" *ngIf="!isAdmin">
								<mat-form-field>
									<mat-label>Transaction Type</mat-label>
									<mat-select placeholder="Select Type" disableRipple formControlName="TypeEnum">
										<mat-option disabled>Select</mat-option>
										<mat-option *ngFor="let transaction of transactionType"
											[value]="transaction.id">{{transaction.name}}</mat-option>
									</mat-select>
								</mat-form-field>

								<app-select-search 
									[options]="transactionType" 
									placeholder="Select Type" 
									[showSearch]="false"
									(optionSelected)="onTransactionType($event)">
								</app-select-search>
							</div> -->
						</div>
						<div class="col-md-6">
							<!-- <div class="item" *ngIf="!isAdmin">
								<mat-form-field>
									<mat-label>Method</mat-label>
									<mat-select placeholder="Select Method..." disableRipple
										formControlName="PaymentChannelId">
										<mat-option disabled>Select Method</mat-option>
										<mat-option *ngFor="let method of PaymentChannels"
											[value]="method.id">{{method.name}}</mat-option>
									</mat-select>
								</mat-form-field>

								<app-select-search 
									[options]="PaymentChannels" 
									placeholder="Select Method" 
									[showSearch]="false"
									(optionSelected)="onMethodSelect($event)">
								</app-select-search>
							</div> -->
						</div>
					</div>

				</div>
				<div class="col-md-12 col-sm-12 col-xs-12">
					<div class="row">

						<!-- <div *ngIf="isAdmin" class="col-md-6">
							<div class="item">
								<mat-form-field>
									<mat-label>Client</mat-label>
									<mat-select placeholder="Select Method..." disableRipple formControlName="ClientId"
										(selectionChange)="onClientChange($event)">
										<mat-option disabled>Select Client</mat-option>
										<mat-option *ngFor="let client of clients"
											[value]="client.id">{{client.name}}</mat-option>
									</mat-select>
								</mat-form-field>

								<app-select-search 
									[options]="clients" 
									placeholder="Select Client" 
									[showSearch]="true"
									(optionSelected)="onClientChange($event)">
								</app-select-search>
							</div>
						</div> -->
						<div [ngClass]="'col-md-12'">
							<div class="item-calendar">
								<mat-form-field>
									<mat-label>StartDate - EndDate</mat-label>
									<mat-date-range-input [rangePicker]="picker">
										<input matStartDate formControlName="StartDate" placeholder="Start date">
										<input matEndDate formControlName="EndDate" placeholder="End date">
									</mat-date-range-input>
									<mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
									<mat-date-range-picker #picker></mat-date-range-picker>
								</mat-form-field>
							</div>
						</div>
					</div>
				</div>
			</div>
		</form>
	</div>
	<div class="col-md-4">
		<div class="row form-container">
			<div class="col-md-12">
				<div class="total-section" *ngFor="let data of totalData">
					<div class="title">
						<div class="image-section">
							<img src="{{data.img}}" alt="">
						</div>
						<span>{{data.label | translate}}</span>
					</div>
					<div class="value"><span>&#8369; {{data.value}}</span></div>
				</div>
			</div>
		</div>
	</div>
	<div class="col-md-4">
		<div class="row form-container">
			<div class="col-md-12">
				<div class="total-section" *ngFor="let data of incomeTotals">
					<div class="title">
						<div class="image-section">
							<img src="{{data.img}}" alt="">
						</div>
						<span>{{data.label | translate}}</span>
					</div>
					<div class="value"><span>&#8369; {{data.value}}</span></div>
				</div>
			</div>
		</div>
	</div>
</div>
<br>
<div class="row">
	<div class="col-md-12">
		<div class="mat-elevation-z0">
			<div class="actions">
				<!-- <app-search (search)="onSearch($event)"></app-search> -->
				<div class="h-divider"></div>
				<app-button [text]="'download' | translate" [icon]="'fa-download'" [btnClass]="'btn-theme btn-lg'"
					(click)="onDownloadExcel()" [disabled]="!isReadAndWrite"></app-button>
			</div>
			<app-spinner *ngIf="isLoading"></app-spinner>
			<div class="container-with-table">
				<table *ngIf="!isLoading" mat-table [dataSource]="dataSource" matSort class="dynastyTable">

					<ng-container matColumnDef="Date">
						<th mat-header-cell *matHeaderCellDef mat-sort-header> Date </th>
						<td mat-cell *matCellDef="let row"> {{row.Date}} </td>
					</ng-container>
					<ng-container matColumnDef="Day">
						<th mat-header-cell *matHeaderCellDef mat-sort-header> Day </th>
						<td mat-cell *matCellDef="let row"> {{row.DayOfWeek}} </td>
					</ng-container>

					<ng-container matColumnDef="CICount">
						<th mat-header-cell *matHeaderCellDef mat-sort-header> CI Count </th>
						<td mat-cell *matCellDef="let row"> {{row.CICount}} </td>
					</ng-container>

					<ng-container matColumnDef="CIGross">
						<th mat-header-cell *matHeaderCellDef mat-sort-header> C.I Gross </th>
						<td mat-cell *matCellDef="let row"> {{row.CIGross | number : '1.2-2'}} </td>
					</ng-container>

					<ng-container matColumnDef="CIFeeOT">
						<th mat-header-cell *matHeaderCellDef mat-sort-header> Fees </th>
						<td mat-cell *matCellDef="let row"> {{row.CIFeeOnTop | number : '1.2-2'}} </td>
					</ng-container>

					<ng-container matColumnDef="CINet">
						<th mat-header-cell *matHeaderCellDef mat-sort-header> C.I Net </th>
						<td mat-cell *matCellDef="let row"> {{row.CINet | number : '1.2-2'}} </td>
					</ng-container>

					<!--Cash Out-->
					<ng-container matColumnDef="COCount">
						<th mat-header-cell *matHeaderCellDef mat-sort-header> CO Count </th>
						<td mat-cell *matCellDef="let row"> {{row.COCount }} </td>
					</ng-container>

					<ng-container matColumnDef="COGross">
						<th mat-header-cell *matHeaderCellDef mat-sort-header> C.O Gross </th>
						<td mat-cell *matCellDef="let row"> {{row.COGross | number : '1.2-2'}} </td>
					</ng-container>

					<ng-container matColumnDef="COFeeOT">
						<th mat-header-cell *matHeaderCellDef mat-sort-header> Fees </th>
						<td mat-cell *matCellDef="let row"> {{row.COFeeOnTop | number : '1.2-2'}} </td>
					</ng-container>

					<ng-container matColumnDef="CONet">
						<th mat-header-cell *matHeaderCellDef mat-sort-header> C.O Net </th>
						<td mat-cell *matCellDef="let row"> {{row.CONet | number : '1.2-2'}} </td>
					</ng-container>
					
					<ng-container matColumnDef="TotalGross">
						<th mat-header-cell *matHeaderCellDef mat-sort-header> Total Gross </th>
						<td mat-cell *matCellDef="let row"> {{row.TotalGross | number : '1.2-2'}} </td>
					</ng-container>

					<ng-container matColumnDef="TotalFees">
						<th mat-header-cell *matHeaderCellDef mat-sort-header> Total Fees </th>
						<td mat-cell *matCellDef="let row"> {{row.TotalFeeOT | number : '1.2-2'}} </td>
					</ng-container>

					<ng-container matColumnDef="TotalNet">
						<th mat-header-cell *matHeaderCellDef mat-sort-header> Total Net</th>
						<td mat-cell *matCellDef="let row"> {{row.TotalNet | number : '1.2-2'}} </td>
					</ng-container>

					<tr mat-header-row *matHeaderRowDef="displayedColumns; sticky:true"></tr>
					<tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

					<!-- Row shown when there is no matching data. -->
					<tr class="mat-row" *matNoDataRow>
						<td class="mat-cell" colspan="20">
							<app-nodata></app-nodata>
						</td>
					</tr>
				</table>
			</div>
			<app-pagination [totalItems]="totalItems" [itemsPerPage]="itemsPerPage" [currentPage]="currentPage"
				(firstData)="onFirstPage()" (nextData)="onNextPage()" (previousData)="onPreviousPage()"
				(lastData)="onLastPage()" (itemsPerPageChange)="onItemsPerPageChanged($event)">
			</app-pagination>
		</div>
	</div>
</div>