<app-maintenance-message>
	<div class="row">
		<div *ngFor="let data of topData.data" class="col-md-4">
			<app-card [isVisible]="false" [isVisiblebtn]="true" label="{{data.label | translate}}" icon="{{data.icon}}"
				value="{{data.value | number : '1.2-2'}}"></app-card>
		</div>
		<div *ngFor="let data of topData.count" class="col-md-3">
			<app-card [isVisible]="false" [isVisiblebtn]="true" label="{{data.label | translate}}" icon="{{data.icon}}"
				value="{{data.value}}"></app-card>
		</div>
	</div>
	<div class="row">
		<div class="col-md-12 col-xs-12 col-sm-12">
			<div class="card-wrapper">
				<div class="card-header">
					<div class="card-title p-3">{{"transactions" | translate}}</div>
					<div class="card-actions">
						<app-search (search)="onSearch($event)"></app-search>
						<div class="h-divider"></div>
						<form [formGroup]="DateRangeForm">
							<mat-form-field>
								<mat-label>StartDate - EndDate</mat-label>
								<mat-date-range-input [rangePicker]="picker">
									<input matStartDate placeholder="Start date" formControlName="startDate">
									<input matEndDate placeholder="End date" formControlName="endDate">
								</mat-date-range-input>
								<mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
								<mat-date-range-picker #picker></mat-date-range-picker>
							</mat-form-field>
						</form>
						<div class="h-divider"></div>
						<form [formGroup]="DateRangeForm">
							<mat-form-field [style.width.px]="130">
								<mat-label>Status</mat-label>
								<mat-select formControlName="status">
									<mat-option *ngFor="let status of transactionStatus"
										[value]="status.Id">{{status.Type}}</mat-option>
								</mat-select>
							</mat-form-field>
						</form>
						<div class="h-divider"></div>
						<form [formGroup]="DateRangeForm">
                            <mat-form-field [style.width.px]="130">
                                <mat-label>Type</mat-label> 
                                <mat-select formControlName="transactionType">
                                    <mat-option *ngFor="let list of transactionType"
                                        [value]="list.Id">{{list.Type}}</mat-option>
                                </mat-select>
                            </mat-form-field>
                        </form>
                        <div class="h-divider"></div>
						<app-button [disabled]="!isReadAndWrite" [text]="'download' | translate" [icon]="'fa-download'" [btnClass]="'btn-theme btn-lg'"
							(click)="exportToExcel()"></app-button>
					</div>
				</div>
				<div class="card-body-table">
					<app-spinner *ngIf="isLoading"></app-spinner>
					<div class="container-with-table">
						<table *ngIf="!isLoading" class="dynastyTable" mat-table [dataSource]="dataSource" matSort>
							<ng-container matColumnDef="Id">
								<th mat-header-cell *matHeaderCellDef mat-sort-header> # </th>
								<td mat-cell *matCellDef="let row"> {{row.Id}} </td>
							</ng-container>
							<ng-container matColumnDef="Date">
								<th mat-header-cell *matHeaderCellDef mat-sort-header> Date </th>
								<td mat-cell *matCellDef="let row"> {{row.Date}} </td>
							</ng-container>

							<ng-container matColumnDef="TransactionNo">
								<th mat-header-cell *matHeaderCellDef mat-sort-header> Transaction No. </th>
								<td mat-cell *matCellDef="let row"> {{row.TransactionNo}} </td>
							</ng-container>
							<ng-container matColumnDef="ReferenceNo">
								<th mat-header-cell *matHeaderCellDef mat-sort-header> Reference No. </th>
								<td mat-cell *matCellDef="let row"> {{row.ReferenceNo}} </td>
							</ng-container>

							<ng-container matColumnDef="ReferenceUserId">
								<th mat-header-cell *matHeaderCellDef mat-sort-header> User Id </th>
								<td mat-cell *matCellDef="let row"> {{row.ReferenceUserId}} </td>
							</ng-container>

							<ng-container matColumnDef="Client">
								<th mat-header-cell *matHeaderCellDef mat-sort-header> Client </th>
								<td mat-cell *matCellDef="let row"> {{row.Client}} </td>
							</ng-container>

							<ng-container matColumnDef="Type">
								<th mat-header-cell *matHeaderCellDef mat-sort-header> Type </th>
								<td mat-cell *matCellDef="let row"> {{row.Type}} </td>
							</ng-container>
							<ng-container matColumnDef="Method">
								<th mat-header-cell *matHeaderCellDef mat-sort-header>Method </th>
								<td mat-cell *matCellDef="let row"> {{row.Method}} </td>
							</ng-container>
							<ng-container matColumnDef="Merchant">
								<th mat-header-cell *matHeaderCellDef mat-sort-header>Merchant </th>
								<td mat-cell *matCellDef="let row"> {{row.Merchant}} </td>
							</ng-container>
							<ng-container matColumnDef="Gross">
								<th mat-header-cell *matHeaderCellDef mat-sort-header>Gross </th>
								<td mat-cell *matCellDef="let row"> {{row.Gross | number : '1.2-2'}} </td>
							</ng-container>
							<ng-container matColumnDef="TranFee">
								<th mat-header-cell *matHeaderCellDef mat-sort-header>Tran. Fee </th>
								<td mat-cell *matCellDef="let row"> {{row.TranFee | number : '1.2-2'}} </td>
							</ng-container>
							<ng-container matColumnDef="Net">
								<th mat-header-cell *matHeaderCellDef mat-sort-header>Net Amount </th>
								<td mat-cell *matCellDef="let row"> {{row.Net | number : '1.2-2'}} </td>
							</ng-container>
							<ng-container matColumnDef="Status">
								<th mat-header-cell *matHeaderCellDef mat-sort-header> Status </th>
								<td mat-cell *matCellDef="let row"> {{row.Status}} </td>
							</ng-container>
							<ng-container matColumnDef="Receipt">
								<th mat-header-cell *matHeaderCellDef mat-sort-header> Receipt </th>
								<td mat-cell *matCellDef="let row">
									<span class="view-receipt" (click)="viewReceipt(row)">view</span>
								</td>
							</ng-container>

							<tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
							<tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

							<!-- Row shown when there is no matching data. -->
							<tr class="mat-row" *matNoDataRow>
								<td class="mat-cell" colspan="14" style="text-align: center;">
									<app-nodata></app-nodata>
								</td>
							</tr>
						</table>
					</div>

					<app-pagination [totalItems]="totalItems" [itemsPerPage]="itemsPerPage" [currentPage]="currentPage"
						(firstData)="onFirstPage()" (nextData)="onNextPage()" (previousData)="onPreviousPage()"
						(lastData)="onLastPage()" (itemsPerPageChange)="onItemsPerPageChanged($event)">
					</app-pagination>
					<!-- <mat-paginator [pageSize]="tableOption.PageSize" [pageSizeOptions]="tableOption.PageSizeOption">
					</mat-paginator>

					<mat-paginator [length]="length" [pageSize]="pageSize" [pageSizeOptions]="pageSizeOptions"
						(page)="pageEvent = $event">
					</mat-paginator>
					<div *ngIf="pageEvent">
						<h5>Page Change Event Properties</h5>
						<div>List length: {{pageEvent.length}}</div>
						<div>Page size: {{pageEvent.pageSize}}</div>
						<div>Page index: {{pageEvent.pageIndex}}</div>
					</div> -->
				</div>
			</div>
			<div class="card-footer"></div>
		</div>
	</div>
</app-maintenance-message>